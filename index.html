<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can LLMs Draw with SGP? - SphereLab</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 页面特定样式 */
        :root {
            --primary-color-dark: #8a8a8a;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #fff;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .article-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header-nav {
            display: flex;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #eaeaea;
            margin-bottom: 40px;
        }
        
        .home-link {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .home-link:hover {
            color: var(--primary-color);
        }
        
        .home-link svg {
            width: 32px;
            height: 18px;
            margin-right: 8px;
        }
        
        .article-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .date-tag {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .date {
            font-size: 14px;
            color: var(--secondary-text-color);
        }
        
        .tag {
            font-size: 14px;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .article-title {
            font-size: 40px;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        .article-abstract {
            font-size: 16px;
            color: var(--secondary-text-color);
            max-width: 600px;
            margin: 0 auto 30px;
            text-align: left;
            background-color: #e9f4f8;
            padding: 20px;
            border-radius: 10px;
            font-style: italic;
        }
        
        .project-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 40px;
        }
        
        .project-link {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease;
        }
        
        .project-link i {
            margin-right: 8px;
        }
        
        .project-link.github {
            background-color: #24292e;
            color: white;
        }
        
        .project-link.github:hover {
            background-color: #1a1e22;
        }
        
        .project-link.huggingface {
            background-color: #ee9a1b;
            color: white;
        }
        
        .project-link.huggingface:hover {
            background-color: #ce8f32;
        }
        
        .project-link.arxiv {
            background-color: #b31b1b;
            color: white;
        }
        
        .project-link.arxiv:hover {
            background-color: #9c1717;
        }
        
        .article-content {
            font-size: 17px;
            line-height: 1.7;
        }
        
        .article-content p {
            margin-bottom: 24px;
        }
        
        .article-section {
            margin: 60px 0;
        }
        
        .article-content h2 {
            font-size: 28px;
            font-weight: 700;
            margin: 40px 0 24px;
            scroll-margin-top: 80px;
        }
        
        .note {
            font-style: italic;
            color: var(--secondary-text-color);
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .feature-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px 0;
            scroll-margin-top: 80px;
        }
        
        .feature-button {
            background-color: var(--light-gray);
            border: none;
            border-radius: 20px;
            padding: 10px 18px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .feature-button:hover {
            background-color: #e5e5e5;
        }
        
        .feature-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .reasoning-process {
            margin: 30px 0;
            border: 1px solid #eaeaea;
            border-radius: 8px;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .reasoning-container {
            min-height: 200px;
        }
        
        .reasoning-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Navigation links for sections */
        .section-nav {
            position: fixed;
            left: calc(50vw - 600px); /* 靠近内容区，540=800/2+140，内容最大宽800px，nav宽约140px */
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .section-link {
            font-size: 14px;
            font-weight: 500;
            color: var(--secondary-text-color);
            text-decoration: none;
            transition: color 0.2s;
            padding: 5px 10px;
            white-space: nowrap;
        }
        
        .section-link:hover, 
        .section-link.active {
            color: var(--primary-color);
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }
        
        /* Subsection navigation styling */
        .section-link[href^="#visual-search"],
        .section-link[href^="#visual-puzzle"],
        .section-link[href^="#geography"],
        .section-link[href^="#medical"],
        .section-link[href^="#science"],
        .section-link[href^="#information"],
        .section-link[href^="#more"] {
            font-size: 12px;
            padding-left: 20px;
            color: #888;
        }
        
        /* 作者栏左右分栏布局 */
        .authors-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 40px;
            background: #f3f3f3;
            border-radius: 10px;
            padding: 24px 24px 24px 24px;
            margin: 20px 0 40px;
            border-bottom: 1px solid #eaeaea;
        }
        .authors-meta {
            flex: 1.3;
        }
        .authors-title, .affiliations-title, .published-title {
            color: #a0a0a0;
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 1px;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        .authors-list {
            display: block;
            font-size: 16px;
            font-weight: 400;
            color: #111;
            /* margin-bottom: 10px; */
        }
        .author {
            font-size: 16px;
            font-weight: 400;
        }
        .author sup {
            font-size: 12px;
            color: #a4a4a4;
            font-weight: 600;
        }
        .author-note {
            font-size: 13px;
            color: #888;
            margin-top: 8px;
            font-style: normal;
            text-align: left;
        }
        .authors-right {
            flex: 1;
            min-width: 180px;
            text-align: left;
        }
        .affiliations-list {
            font-size: 16px;
            color: #111;
        }
        .published-date {
            font-size: 16px;
            color: #111;
        }
        @media (max-width: 768px) {
            .authors-section {
                flex-direction: column;
                gap: 10px;
                text-align: left;
            }
            .authors-right {
                text-align: left;
                min-width: 0;
            }
        }
        
        /* 页脚样式 */
        footer {
            padding: 20px 0;
            margin-top: 60px;
            text-align: center;
        }
        
        .footer-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .footer-social {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: #666;
            transition: color 0.2s, transform 0.2s;
            font-size: 18px;
            background-color: #f5f5f5;
        }
        
        .social-icon:hover {
            color: var(--primary-color);
            transform: translateY(-3px);
            background-color: #eeeeee;
        }
        
        .copyright {
            font-size: 14px;
            color: #666;
        }

        /* code style */
        .bibtex-block {
            background: #f7f7fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 18px 18px 12px 18px;
            margin: 32px 0 32px 0;
            position: relative;
        }
        .bibtex-title {
            font-size: 16px;
            font-weight: 600;
            color: #444;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        .bibtex-pre {
            font-size: 14px;
            color: #333;
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
            white-space: pre;
            line-height: 1.6;
            overflow-x: auto;
            word-break: normal;
        }
        .bibtex-copy-btn {
            position: absolute;
            top: 18px;
            right: 18px;
            background: #ededed;
            border: none;
            border-radius: 4px;
            padding: 4px 10px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
            transition: background 0.2s;
        }
        .bibtex-copy-btn:hover {
            background: #e0e0e0;
            color: #222;
        }
        
        @media (max-width: 768px) {
            .article-title {
                font-size: 32px;
            }
            
            .feature-buttons {
                justify-content: center;
            }
            
            .authors-list {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (max-width: 1200px) {
            .section-nav {
                position: static;
                transform: none;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                margin: 30px 0;
                padding: 15px 0;
                border-top: 1px solid #eaeaea;
                border-bottom: 1px solid #eaeaea;
                background: none;
                box-shadow: none;
                left: 0;
            }
            .article-container {
                padding-left: 0;
            }
        }
        
        /* Reasoning process styling */
        .reasoning-container {
            max-height: 600px;
            overflow-y: auto;
            padding: 16px;
            width: 100%;
        }
        
        .reasoning-error {
            padding: 20px;
            text-align: center;
            color: #d32f2f;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .error-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .reasoning-message {
            margin-bottom: 16px;
            padding: 12px;
            border-radius: 6px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .reasoning-user {
            background-color: #f1f5f9;
        }
        
        .reasoning-user strong {
            display: block;
            margin-bottom: 10px;
            color: #1d75a5;
            font-size: 1.1em;
        }
        
        .reasoning-assistant {
            background-color: #ffffff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        
        .reasoning-text {
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .reasoning-code {
            margin: 12px 0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .reasoning-code pre {
            margin: 0;
            padding: 12px;
            background-color: #2b2b2b;
            color: #f8f8f2;
            overflow-x: auto;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .reasoning-interpreter-output {
            margin: 12px 0;
            padding: 12px;
            background-color: #f7f7f9;
            border-left: 4px solid #8a8a8a;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .reasoning-image-wrap {
            margin: 12px 0;
            text-align: center;
        }
        
        .reasoning-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .reasoning-image.enlarged {
            max-height: none;
            max-width: 90%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 10;
            position: relative;
        }
        
        .reasoning-answer {
            margin-top: 16px;
        }
        
        .answer-box {
            padding: 12px 16px;
            background-color: #e8f5e9;
            border: 1px solid #c8e6c9;
            border-radius: 6px;
            color: #388e3c;
            font-weight: 600;
        }
        
        .user-question {
            background-color: #e8f5fe;
            border-left: 4px solid #1d75a5;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        
        .user-question strong {
            display: block;
            color: #1d75a5;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        /* 对话气泡样式 */
        .bubble {
            max-width: 80%;
            padding: 14px 18px;
            border-radius: 18px;
            font-size: 16px;
            line-height: 1.6;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            word-break: break-word;
        }
        .bubble-gpt {
            background: #ffffff;
            color: #222;
            align-self: flex-start;
            border-top-left-radius: 6px;
            margin-right: auto;
        }
        .bubble-human {
            background: #f3f9ff;
            color: #1a3a5d;
            align-self: flex-end;
            border-top-right-radius: 6px;
            margin-left: auto;
        }
        .reasoning-message {
            display: flex;
            margin-bottom: 16px;
        }
        
        /* 新增：标识符样式 */
        .tag-indicator {
            font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
            font-size: 12px;
            color: #666;
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            margin: 2px 0;
            border: 1px solid #e0e0e0;
            display: inline-block;
        }
        
        .reasoning-code-block,
        .reasoning-image-block,
        .reasoning-interpreter-block,
        .reasoning-answer-block {
            margin: 12px 0;
            border: 1px solid #e8e8e8;
            border-radius: 6px;
            padding: 8px;
            background-color: #fafafa;
        }
        
        /* Category sections styling */
        .category-section {
            margin: 50px 0;
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 40px;
        }
        
        .category-section:last-child {
            border-bottom: none;
        }
        
        .category-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary-color-dark);
        }
        
        .category-buttons {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>

    <main class="article-container">
        <article>
            <div class="article-header" style="margin-top: 30px;">
                <div class="date-tag">
                    <span class="date">September 9, 2025</span>
                    <span class="tag">Released</span>
                </div>
                <h1 class="article-title">Symbolic Graphics Programming with Large Language Models</h1>
                <div style="text-align: center;margin-bottom: 30px;">
                    <img src="img/sgp-teaser.svg" alt="SVG tesaer"">
                </div>

                <!-- authors -->
                <div class="authors-section">
                    <div class="authors-meta">
                        <div class="authors-title" style="text-align:left;">AUTHORS</div>
                        <div class="authors-list" style="text-align:left;">
                            <span class="author">Yamei Chen<sup>1,2,*</sup></span>, 
                            <span class="author">Haoquan Zhang<sup>1,3,*</sup></span>, 
                            <span class="author">Yangyi Huang<sup>1,2</sup></span>, 
                            <span class="author">Zeju Qiu<sup>4</sup></span>, 
                            <span class="author">Kaipeng Zhang<sup>3</sup></span>, 
                            <span class="author">Yandong Wen<sup>1</sup></span>, 
                            <span class="author">Weiyang Liu<sup>2,4</sup></span>
                        </div>
                        <div class="author-note">* Equal Contributing</div>
                    </div>
                    <div class="authors-right">
                        <div class="affiliations-title">AFFILIATIONS</div>
                        <div class="affiliations-list">
                            <sup>1</sup> Westlake University<br>
                            <sup>2</sup> CUHK<br>
                            <sup>3</sup> Shanghai AI Laboratory<br>
                            <sup>4</sup> MPI-IS
                        </div>
                    </div>
                </div>

                <div class="project-links">
                    <a href="https://github.com/Sphere-AI-Lab/SGP-RL" class="project-link github">
                        <i class="fab fa-github"></i> Code
                    </a>
                    <a href="https://huggingface.co/datasets/SphereLab/sgp-gen-model" class="project-link huggingface">
                        <i class="fas fa-rocket"></i> Model
                    </a>
                    <a href="https://huggingface.co/collections/SphereLab/sgp-generation-68b7d8a3b70ff81184c9923d" class="project-link huggingface">
                        <i class="fas fa-chart-bar"></i> Bench
                    </a>
                    <a href="TBA" class="project-link arxiv">
                        <i class="fas fa-file-alt"></i> Paper
                    </a>
                </div>
                
            </div>
            
            <nav class="section-nav">
                <a href="#introduction" class="section-link active">Introduction</a>
                <a href="#method" class="section-link">Method</a>
                <a href="#sgp-gen-bench" class="section-link">SGP-Gen-Bench</a>
                <a href="#object-scene" class="section-link" style="font-size: 12px; padding-left: 20px; color: #888;">Object & Scene</a>
                <a href="#composition" class="section-link" style="font-size: 12px; padding-left: 20px; color: #888;">Composition</a>
                <a href="#results" class="section-link">Results</a>
                <a href="#conclusion" class="section-link">Conclusion</a>
                <a href="#bibtex" class="section-link">Bibtex</a>
            </nav>

            <div class="article-content">
                <h2 id="introduction">Introduction</h2>
                <p>
                LLMs have demonstrated exceptional capabilities in understanding and generating computer programs. Motivated by the effectiveness, we focus on a special class of programs, symbolic graphics programs (SGPs), which can be translated into unique graphical content (e.g., images or 3D objects). However, the ability of LLMs to generate SGPs remains underexplored and insufficiently evaluated.
                Among various SGPs, scalable vector graphics (SVGs) are one of the most representative and are widely available on the Internet, making them an ideal testbed for studying symbolic graphics programming with LLMs. We focus on two key research questions: 
                </p>
                <p>
                <span style="color:#1274c5; font-weight:bold;">(1) how well can LLMs draw using SGPs?</span> 
                <br>
                <span style="color:#1274c5;">To address the first question, we introduce <em>SGP-GenBench</em>, a comprehensive benchmark for evaluating LLMs' ability to generate SGPs from three perspectives: object, scene, and composition.</span>
                </p>
                <p>
                <span style="color:#970d0d; font-weight:bold;">(2) how can we improve their ability to generate SGPs?</span>
                <br>
                <span style="color:#970d0d;">To improve performance, we propose a reinforcement learning approach that uses similarity scores between visual encoder outputs and input text descriptions as reward signals. This enables LLMs to progressively enhance SVG generation quality and semantic alignment during training. Our experiments show that RL significantly boosts the symbolic graphics programming abilities of LLMs, ultimately achieving performance comparable to state-of-the-art closed-source models.</span>
                </p>
                <p>
                </p>

                <h2 id="sgp-gen-bench">SGP as Visual Synthesis</h2>
                <img src="img/parameterized- procedural.drawio.svg" alt="SVG visual synthesis"">
                <p>
                    Symbolic graphics programming (SGP) aims to generate structured graphics code, such as SVG, from natural language instructions. Unlike conventional text-to-image models that produce pixel-based images, SGP translates prompts into interpretable, parametric programs, enabling precise and controllable visual synthesis.
                </p>
                <p>
                    SVG is widely used and serves as a natural bridge between language and vision, making it ideal for evaluating LLMs' ability to ground semantics from prompt to code.
                    SGPs are both <b style="color:#1274c5;">PARAMETRIC</b>
                    <span style="color:#1274c5;">—allowing exact geometric and appearance control—</span>
                    and <b style="color:#1ca67a;">PROCEDURAL</b>
                    <span style="color:#1ca67a;">, supporting hierarchical and compositional scene construction.</span>
                    These properties enable fine-grained, interpretable, and flexible visual generation, and allow us to directly analyze the complexity and structure of generated scenes.
                </p>

                <h2 id="sgp-gen-bench">SGP-GenBench</h2>
                <p>
                    We start with the first research question: To what extent can LLMs generate SGPs effectively? To investigate this, we introduce SGP-GenBench, a large-scale benchmark designed to evaluate LLM performance across three dimensions: object-level accuracy, scene-level semantics, and compositional consistency. SGP-GenBench enables systematic comparison across models and provides diagnostic insights into their symbolic graphics programming capabilities. Using this benchmark, we conduct extensive evaluations of both proprietary and open-source models. Our results indicate that proprietary reasoning-enhanced models consistently outperform non-reasoning variants, with performance strongly correlated with coding proficiency. Additionally, open-source LLMs, in contrast to proprietary ones, remain substantially less effective in generating valid and semantically aligned SVGs.
                </p>

                <h3 id="object-scene">Object & Scene</h3>
                <p>
                    Object & Scene is a benchmark for evaluating the performance of SGP generation models.
                </p>
                
                <h3 id="composition">Composition</h3>

                <div style="overflow-x: auto; margin: 20px 0;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 14px; background: white; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #f8f9fa;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left; font-weight: 600;">Model</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;" colspan="4">Attribute Binding⬆️</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;" colspan="4">Relation⬆️</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;" colspan="4">Numeracy⬆️</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">Avg.</th>
                            </tr>
                            <tr style="background-color: #f8f9fa; font-size: 12px; color: #666;">
                                <th style="border: 1px solid #ddd; padding: 4px;"></th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Color</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Shape</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Texture</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Avg.</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">2D</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">3D</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Implicit</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Avg.</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Total</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Item</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">CPT</th>
                                <th style="border: 1px solid #ddd; padding: 4px; text-align: center;">Avg.</th>
                                <th style="border: 1px solid #ddd; padding: 4px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 2px solid #333;">
                                <td style="border: 1px solid #ddd; padding: 8px; font-weight: 600;" colspan="14">Frontier closed-source LLMs</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">GPT-4o</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">62.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">48.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">34.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">48.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">49.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">37.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">49.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">45.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">85.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">25.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">51.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">52.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">48.3</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">o1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">70.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">25.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">53.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">49.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">54.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">39.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">46.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">46.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">66.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">20.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">41.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">42.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">46.7</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">o3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">88.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">73.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">71.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">78.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">81.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">62.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">84.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">76.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">91.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">59.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">81.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">78.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">77.5</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">o4-mini</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">82.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">62.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">69.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">71.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">71.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">57.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">76.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">68.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">90.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">52.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">76.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">74.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">71.0</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Gemini 2.5 Flash Preview</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">63.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">45.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">56.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">55.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">46.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">38.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">57.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">47.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">82.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">34.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">62.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">59.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">53.4</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Gemini 2.5 Pro Preview</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">88.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">65.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">74.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">76.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">77.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">59.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">80.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">72.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">94.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">68.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">83.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">82.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">76.2</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Claude 3.7 Sonnet</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">89.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">82.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">77.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">83.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">75.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">59.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">73.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">69.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">91.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">65.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">85.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">82.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">77.9</td>
                            </tr>
                            <tr style="background-color: rgba(128, 128, 128, 0.2);">
                                <td style="border: 1px solid #ddd; padding: 8px;">Claude 3.7 Sonnet Thinking</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">90.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">85.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">82.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">86.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">80.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">74.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">86.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">80.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">94.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">78.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">91.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">89.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">84.8</td>
                            </tr>
                            <tr style="border-bottom: 2px solid #333;">
                                <td style="border: 1px solid #ddd; padding: 8px; font-weight: 600;" colspan="14">Open-source LLMs</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">QwQ-32B</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">54.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">51.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">31.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">45.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">43.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">33.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">46.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">41.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">79.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">21.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">51.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">50.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">45.2</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">DeepSeek-R1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">72.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">62.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">48.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">61.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">59.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">43.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">58.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">53.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">83.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">35.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">60.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">57.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">57.4</td>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">Qwen-2.5-7B</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">7.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">10.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">1.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">6.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">5.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">5.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">8.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">6.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">42.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">5.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">10.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">16.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">8.8</td>
                            </tr>
                            <tr style="background-color: rgba(255, 165, 0, 0.15);">
                                <td style="border: 1px solid #ddd; padding: 8px;">Qwen-2.5-7B - RL <strong>(Ours)</strong></td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">84.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">71.3</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">46.0</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">67.2</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">55.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">53.9</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">61.7</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">57.1</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">63.4</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">47.5</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">57.6</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">56.8</td>
                                <td style="border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: 600;">60.8</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p style="font-size: 14px; color: #666; margin-top: 10px;">
                    ⬆️ Performance scores are reported as scores. Higher scores indicate better performance.
                </p>

                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <h3 style="text-align: center; margin: 40px 0 20px 0;">Overall Performance Comparison</h3>
                <div style="margin: 20px 0;">
                    <canvas id="overallPerformanceChart" width="800" height="400"></canvas>
                </div>
                
                <script>
                // Overall performance chart
                const overallCtx = document.getElementById('overallPerformanceChart');
                
                new Chart(overallCtx, {
                    type: 'bar',
                    data: {
                        labels: [
                            'Claude-3.7 Sonnet Thinking',
                            'Claude-3.7 Sonnet',
                            'o3',
                            'Gemini 2.5 Pro Preview',
                            'o4-mini',
                            'Gemini 2.5 Flash Preview',
                            'GPT-4o',
                            'o1',
                            'Qwen-2.5-7B-RL (Ours)',
                            'DeepSeek-R1',
                            'Qwen-32B',
                            'Qwen-2.5-7B'
                        ],
                        datasets: [{
                            label: 'Overall Average Score (%)',
                            data: [84.8, 77.9, 77.5, 76.2, 71.0, 53.4, 48.3, 46.7, 60.8, 57.4, 45.2, 8.8],
                            backgroundColor: [
                                '#1a365d',  // Claude-3.7 Sonnet Thinking - Darkest blue
                                '#2c5282',  // Claude-3.7 Sonnet - Dark blue
                                '#3182ce',  // o3 - Medium dark blue
                                '#4299e1',  // Gemini 2.5 Pro Preview - Medium blue
                                '#63b3ed',  // o4-mini - Medium light blue
                                '#90cdf4',  // Gemini 2.5 Flash Preview - Light blue
                                '#bee3f8',  // GPT-4o - Very light blue
                                '#e6f3ff',  // o1 - Lightest blue
                                '#dc2626',  // Ours - Red highlight
                                '#ef4444',  // DeepSeek-R1 - Medium red
                                '#f87171',  // Qwen-32B - Light red
                                '#fca5a5'   // Qwen-2.5-7B - Very light red
                            ],
                            borderColor: [
                                '#0f2027',  // Claude Sonnet Thinking border - darker blue
                                '#1a365d',  // Claude Sonnet border - dark blue
                                '#2c5282',  // o3 border - medium dark blue
                                '#3182ce',  // Gemini Pro border - medium blue
                                '#4299e1',  // o4-mini border - medium light blue
                                '#63b3ed',  // Gemini Flash border - light blue
                                '#90cdf4',  // GPT-4o border - very light blue
                                '#bee3f8',  // o1 border - lightest blue
                                '#b91c1c',  // Ours - darker red border to match highlight
                                '#dc2626',  // DeepSeek-R1 border - red
                                '#ef4444',  // Qwen-32B border - medium red
                                '#f87171'   // Qwen-2.5-7B border - light red
                            ],
                            borderWidth: 2,
                            borderRadius: 4,
                            borderSkipped: false,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 14,
                                        weight: '500'
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.parsed.y + '%';
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    },
                                    font: {
                                        size: 12
                                    }
                                },
                                grid: {
                                    color: '#e5e5e5'
                                }
                            },
                            x: {
                                ticks: {
                                    maxRotation: 45,
                                    minRotation: 0,
                                    font: {
                                        size: 11
                                    }
                                },
                                grid: {
                                    display: false
                                }
                            }
                        },
                        layout: {
                            padding: {
                                top: 20,
                                bottom: 20
                            }
                        }
                    }
                });
                </script>

                <h2 id="method">Method</h2>
                    <p>
                        The observation that open-source models still struggle to generate usable SGPs raises the second research question: How can we improve their SGP generation ability? To this end, we propose a reinforcement learning (RL) approach that leverages similarity scores between visual encoder outputs and input text descriptions as the verifiable reward signals. This approach enables LLMs to progressively improve both the quality and semantic alignment of their SVG generation. Experiments show that our method can substantially enhance symbolic graphics programming: open-source LLMs that initially produced unrecognizable SVGs are trained to achieve performance comparable to state-of-the-art proprietary models.
                    </p>
                
                <h2 id="results">Results</h2>
                <p>
                    Our latest visual reasoning models work in tandem with other tools like Python data analysis,
                    web search, and image generation to creatively and effectively solve various tasks,
                    from educational questions to complex scientific challenges.
                </p>
                
                <!-- Dynamic category sections will be inserted here -->
                <div id="category-sections"></div>
                
                <h2 id="conclusion">Conclusion</h2>
                <p>
                    We are continuing to enhance our visual models with improved reasoning capabilities and
                    broader domain knowledge. Future versions will demonstrate even more sophisticated
                    understanding of complex visual inputs and better integration with programming tools.
                </p>

                <h2 id="bibtex">Bibtex</h2>
                <div class="bibtex-block">
                    <!-- <div class="bibtex-title">BibTeX Citation</div> -->
                    <pre class="bibtex-pre">@article{chen2025python,
  title={Python is a good visual primitive},
  author={Chen, Yamei and Zhang, Haoquan and Huang, Yangyi and Qiu, Zeju and Zhang, Kaipeng and Wen, Yandong and Liu, Weiyang},
  year={2025},
}</pre>
                    <!-- <button class="bibtex-copy-btn" onclick="copyBibtex()">Copy</button> -->
                </div>
            </div>
        </article>
    </main>

    <footer>
        <div class="container">
            <div class="copyright">
                <p>&copy; 2025 SphereLab. All rights reserved.</p>
                <p>Webpage designed by <a href="https://haoquanzhang.github.io" style="text-decoration: underline;">Haoquan Zhang</a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize section highlighting
            initSectionHighlight();
            // Load case data and create buttons
            loadCaseButtons();
        });
        
        function initSectionHighlight() {
            const sectionLinks = document.querySelectorAll('.section-nav .section-link');
            const sections = document.querySelectorAll('h1[id], h2[id], .feature-buttons[id]');
            
            // Highlight the current section on scroll
            function highlightSection() {
                const scrollPosition = window.scrollY + 100;
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const sectionId = section.getAttribute('id');
                    
                    if (sectionId && 
                        scrollPosition >= sectionTop && 
                        scrollPosition < sectionTop + sectionHeight) {
                        
                        sectionLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${sectionId}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }
            
            window.addEventListener('scroll', highlightSection);
            highlightSection(); // Run once on initial load
            
            // Smooth scrolling for section links
            sectionLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // Update active state
                        sectionLinks.forEach(link => link.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });
        }
        
        async function loadCaseButtons() {
            try {
                // Load the case metadata
                const casesResponse = await fetch('assets/trajectory_cases.json');
                
                if (!casesResponse.ok) {
                    throw new Error(`Failed to load cases data: ${casesResponse.status}`);
                }
                
                const casesData = await casesResponse.json();
                
                // Get the category sections container
                const categorySectionsContainer = document.getElementById('category-sections');
                categorySectionsContainer.innerHTML = '';
                
                // Create sections for each category
                const categories = Object.keys(casesData);
                
                categories.forEach((categoryName, categoryIndex) => {
                    const categorySection = document.createElement('div');
                    categorySection.className = 'category-section';
                    categorySection.innerHTML = `
                        <h3 id="${categoryName.toLowerCase()}" class="category-title">${categoryName}</h3>
                        <div class="feature-buttons category-buttons" id="buttons-${categoryName}"></div>
                        <div class="reasoning-process">
                            <div id="reasoning-container-${categoryName}" class="reasoning-container">
                                <div class="reasoning-loading">
                                    <div class="loading-spinner"></div>
                                    <p>Select a case to view the reasoning process...</p>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    categorySectionsContainer.appendChild(categorySection);
                    
                    // Create buttons for this category
                    const buttonsContainer = document.getElementById(`buttons-${categoryName}`);
                    const cases = casesData[categoryName];
                    
                    cases.forEach((caseInfo, caseIndex) => {
                        const button = document.createElement('button');
                        button.className = 'feature-button' + (caseIndex === 0 ? ' active' : '');
                        button.setAttribute('data-file-dir', caseInfo.file_dir);
                        button.setAttribute('data-category', categoryName);
                        button.textContent = caseInfo.show_name;
                        
                        button.addEventListener('click', function() {
                            // Remove active class from all buttons in this category
                            buttonsContainer.querySelectorAll('.feature-button').forEach(btn => {
                                btn.classList.remove('active');
                            });
                            // Add active class to clicked button
                            this.classList.add('active');
                            // Load the trajectory case
                            loadTrajectoryCase(this.getAttribute('data-file-dir'), this.getAttribute('data-category'));
                        });
                        
                        buttonsContainer.appendChild(button);
                    });
                    
                    // 自动加载第一个案例
                    if (cases.length > 0) {
                        loadTrajectoryCase(cases[0].file_dir, categoryName);
                    }
                });
                
            } catch (error) {
                console.error('Error loading case buttons:', error);
                const categorySectionsContainer = document.getElementById('category-sections');
                categorySectionsContainer.innerHTML = '<p>Error loading examples. Please try again later.</p>';
            }
        }
        
        async function loadTrajectoryCase(fileDir, category) {
            const container = document.getElementById(`reasoning-container-${category}`);
            container.innerHTML = `
                <div class="reasoning-loading">
                    <div class="loading-spinner"></div>
                <p>Loading visual reasoning process...</p>
                </div>
            `;
            try {
                // Load conversation from the specified directory
                const response = await fetch(`${fileDir}/conversations.json`);
                if (!response.ok) {
                    throw new Error(`Failed to load conversations: ${response.status}`);
                }
                const conversation = await response.json();
                renderConversation(conversation, container, fileDir);
            } catch (error) {
                console.error('Error loading conversation:', error);
                container.innerHTML = `
                    <div class="reasoning-error">
                        <div class="error-icon">⚠️</div>
                        <p>Error loading the reasoning process: ${error.message}</p>
                        <p>Please check the browser console for more details.</p>
                    </div>
                `;
            }
        }

        function renderConversation(conversation, container, fileDir) {
            container.innerHTML = '';
            conversation.forEach((msg, idx) => {
                const msgDiv = document.createElement('div');
                msgDiv.className = `reasoning-message reasoning-${msg.from}`;
                let value = msg.value;

                // 1. 先提取所有代码块，临时用占位符替换（统一用[[CODEBLOCK0]]格式）
                const codeBlocks = [];
                value = value.replace(/<code>\n```python\n([\s\S]*?)\n```\n<\/code>/g, (match, code) => {
                    codeBlocks.push(code);
                    return `[[CODEBLOCK${codeBlocks.length - 1}]]`;
                });

                // 2. 提取图片为占位符
                const imageBlocks = [];
                value = value.replace(/<image_clue_(\d+)>.*?<\/image_clue_\d+>/gs, (match, p1) => {
                    imageBlocks.push(p1);
                    return `[[IMAGEBLOCK${imageBlocks.length - 1}]]`;
                });

                // 3. 渲染interpreter输出 <interpreter>...</interpreter>
                value = value.replace(/<interpreter>([\s\S]*?)<\/interpreter>/g, (match, output) => {
                    if (output.includes('reasoning-image-wrap')) {
                        return `<div class="tag-indicator">&lt;interpreter&gt;</div><div class="reasoning-interpreter-output">${output}</div><div class="tag-indicator">&lt;/interpreter&gt;</div>`;
                    } else {
                        return `<div class="tag-indicator">&lt;interpreter&gt;</div><div class="reasoning-interpreter-output">${escapeHtml(output)}</div><div class="tag-indicator">&lt;/interpreter&gt;</div>`;
                    }
                });

                // 4. 渲染最终答案 <answer>...</answer>
                value = value.replace(/<answer>\n\\boxed{([\s\S]*?)}\n<\/answer>/g, (match, answer) => {
                    return `<div class="tag-indicator">&lt;answer&gt;</div><div class="reasoning-answer"><div class="answer-box">Final Answer: \\boxed{${escapeHtml(answer)}}</div></div><div class="tag-indicator">&lt;/answer&gt;</div>`;
                });

                // 5. 只对普通文本做换行和markdown处理
                value = value.replace(/\n/g, '<br>');
                value = value.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
                value = value.replace(/\*([^*]+)\*/g, '<em>$1</em>');
                value = value.replace(/__([^_]+)__/g, '<strong>$1</strong>');
                value = value.replace(/_([^_]+)_/g, '<em>$1</em>');

                // 6. 还原图片
                value = value.replace(/\[\[IMAGEBLOCK(\d+)\]\]/g, (match, idx) => {
                    const img = document.createElement('img');
                    img.src = `${fileDir}/images/image_${imageBlocks[idx]}.png`;
                    img.className = 'reasoning-image';
                    img.alt = `image_${imageBlocks[idx]}`;
                    img.onerror = function() {
                        this.onerror = null;
                        this.src = 'https://via.placeholder.com/600x400?text=Image+Load+Failed';
                    };
                    const wrap = document.createElement('div');
                    wrap.className = 'reasoning-image-wrap';
                    wrap.appendChild(img);
                    // 添加标识符并返回HTML字符串
                    return `<div class="tag-indicator">&lt;image_clue_${imageBlocks[idx]}&gt;</div>${wrap.outerHTML}<div class="tag-indicator">&lt;/image_clue_${imageBlocks[idx]}&gt;</div>`;
                });

                // 7. 还原代码块
                value = value.replace(/\[\[CODEBLOCK(\d+)\]\]/g, (match, idx) => {
                    return `<div class="tag-indicator">&lt;code&gt;</div><div class="reasoning-code"><pre><code class="language-python">${escapeHtml(codeBlocks[idx])}</code></pre></div><div class="tag-indicator">&lt;/code&gt;</div>`;
                });

                // 对话气泡样式
                const bubbleClass = msg.from === 'human' ? 'bubble-human' : 'bubble-gpt';
                msgDiv.innerHTML = `<div class="bubble ${bubbleClass}">${value}</div>`;
                container.appendChild(msgDiv);
            });
            // 代码高亮
            if (window.hljs) {
                container.querySelectorAll('pre code').forEach((block) => {
                    window.hljs.highlightBlock(block);
                });
            }
        }

        // HTML转义
        function escapeHtml(str) {
            return str.replace(/&/g, '&amp;')
                      .replace(/</g, '&lt;')
                      .replace(/>/g, '&gt;')
                      .replace(/"/g, '&quot;')
                      .replace(/'/g, '&#39;');
        }
    </script>
    
    <!-- Add highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</body>
</html> 
